doctype html
html
  head
    meta(charset="UTF-8")
    meta(name="viewport" content="width=device-width, initial-scale=1.0")
    title Resource Usage Summary

  body
  div(style="background-color: #f3f3ff; padding: 16px 0; color: #2A2C37;" class='noto-sans')
    style.
      @import url("https://fonts.googleapis.com/css2?family=Noto+Sans+Thai&display=swap")

      .noto-sans {
        font-family: 'Noto Sans Thai', sans-serif;
      }
    table(border="0" cellpadding="0" cellspacing="0" width="100%" style="background-color:#f3f3ff;")
    tr
      td
        center
          table(border="0" cellpadding="0" cellspacing="0" width="595")
            tr
              td(style="padding:32px 24px; background-color:#ffffff; font-size:14px; font-weight: 400px")
                table(width="100%" border="0" cellspacing="0" cellpadding="0" style="margin-bottom:24px;")
                  tr
                    td
                      img(src=logo alt="Nipa Cloud Logo" title="Nipa Cloud Logo" style="display:block; width:150px;" width="150")

                table(width="100%" border="0" cellspacing="0" cellpadding="0" style="margin-bottom:24px;")
                  tr
                    td
                      | Dear #{recipient_name || "Customer"}

                table(width="100%" border="0" cellspacing="0" cellpadding="0" style="margin-bottom:24px;")
                  tr
                    td
                      | Attached is your 
                      strong #{cycle_started_at} - #{cycle_end_at} Cycle Report
                      | , which provides the cost associated with your resource usage for this cycle.

                table(width="100%" border="0" cellspacing="0" cellpadding="0" style="margin-bottom:24px;")
                  tr
                    td
                      | Below is a summary of your resource usage and the total cost for this cycle.
                div(style="padding: 0 16px;")
                  table(width="100%" border="0" cellspacing="0" cellpadding="0" style="margin-bottom: 16px;")
                    tr
                      td(colspan="2", style="font-weight:600; font-size:16px; padding-bottom:8px;")
                        | Resource Usage Summary
                    tr
                      td(style="width:100px; font-weight:bold; padding-bottom:8px;") Period
                      td(style="padding-bottom:8px;")
                        | : #{cycle_started_at} to #{cycle_end_at}
                    tr
                      td(style="width:100px; font-weight:bold; padding-bottom:8px;") Project ID
                      td(style="padding-bottom:8px;")
                        | : #{project_id}
                    tr
                      td(style="width:100px; font-weight:bold;") Project Name
                      td
                        | : #{project_name}

                  table(width="100%" border="0" cellpadding="0" cellspacing="0" style="border-collapse:collapse; margin-bottom: 24px;")
                    tbody
                      tr(style="text-align:left; border-top:1px solid #C5C7D3; border-bottom:1px solid #E6E6EC; color:#8D91A6;")
                        td(style="padding:8px 0;") Resource Type
                        td(style="padding:8px 0; text-align:right;") Cost
                      - var resourceList = resources || []
                      if !resourceList || resourceList.length === 0
                        - resourceList = []
                        - resourceList.push({ name: "Compute Instance", price: 0 })
                        - resourceList.push({ name: "Volumes", price: 0 })
                        - resourceList.push({ name: "Snapshots", price: 0 })
                        - resourceList.push({ name: "External IPs", price: 0 })
                        - resourceList.push({ name: "Load Balancers", price: 0 })
                        - resourceList.push({ name: "Database Instance", price: 0 })
                        - resourceList.push({ name: "Object Storage", price: 0 })
                        - resourceList.push({ name: "International Bandwidth", price: 0 })

                      each item in resourceList
                        - var priceDisplay = (item.price/1000000).toLocaleString(undefined,{minimumFractionDigits:6, maximumFractionDigits:6})
                        - var priceSplit = priceDisplay.split(".")
                        - var priceInteger = priceSplit[0]
                        - var priceDecimal = priceSplit[1]
                        tr(style="border-bottom:1px solid #E6E6EC;")
                          td(style="padding:8px 0;")= item.name
                          td(style="padding:8px 0; text-align:right;") #{priceInteger}
                            span(style="font-size:10px;") .#{priceDecimal} THB

                      tr
                        td(style="padding:8px 0;") Total
                        td(style="padding:8px 0; text-align:right;") #{(total_price/1000000).toLocaleString(undefined,{minimumFractionDigits:6, maximumFractionDigits:6})} THB

                      tr
                        td(style="padding:8px 0;") VAT 7%
                        td(style="padding:8px 0; text-align:right;") #{(vat/1000000).toLocaleString(undefined,{minimumFractionDigits:6, maximumFractionDigits:6})} THB

                      tr(style="border-bottom:1px solid #C5C7D3; font-weight:bold;")
                        td(style="padding:8px 0;") Grand Total
                        td(style="padding:8px 0; text-align:right;") #{(grand_total/1000000).toLocaleString(undefined,{minimumFractionDigits:6, maximumFractionDigits:6})} THB

                table(width="100%" border="0" cellspacing="0" cellpadding="0" style="margin-bottom:24px;")
                  tr
                    td
                      | For a complete breakdown, please refer to the attached report. 
                      | For any questions or require further clarification, please feel free to contact us via 
                      a(href="#")  
                        strong(style="font-weight:bold; color:#4959D1; text-decoration:none;") Customer Support
                      |  or 
                      strong(style="font-weight:bold;") +66 86 328 3030
                      |  or 
                      a(href="#")
                        strong(style="font-weight:bold; color:#4959D1; text-decoration:none;") support@nipa.cloud

                table(width="100%" border="0" cellspacing="0" cellpadding="0" style="margin-bottom:24px;")
                  tr
                    td
                      | This report is based on Nipa Cloud’s Pay-as-you-go pricing model. 
                      | Customers are charged based on actual usage, which may vary each cycle as shown in this report.

                table(width="100%" border="0" cellspacing="0" cellpadding="0" style="margin-bottom:24px;")
                  tr
                    td
                      div Best regards,
                      div(style="color:#232C65;") Nipa Cloud Space Team

                table(width="100%" border="0" cellspacing="0" cellpadding="0" style="border-bottom:1px solid #C5C7D3; margin-bottom:24px;")
                  tr
                    td

                table(width="100%" border="0" cellspacing="0" cellpadding="0")
                  tr
                    td(style="text-align:center; color:#8D91A6; font-weight:600; font-size:10px;")
                      | Please do not reply, as this email was generated by an automated system.

            tr
              td(style="background-color:#1E2657; padding:16px 24px; text-align:center; font-size:10px; color:#F9F9FC;")
                table(width="100%" border="0" cellspacing="0" cellpadding="0")
                  tr
                    td(style="padding-bottom:16px; color:rgb(92, 92, 92);")
                      | © 
                      span(style="color:#F9F9FC;") 2025 Nipa Technology Co., Ltd., All Rights Reserved.
                  tr
                    td(style="padding-bottom:16px;")
                      | NIPA Cloud does not request any personal information, such as a username or password. 
                      | If you are asked to provide such information, please decline and inform us for your safety.
                  tr
                    td
                      | Privacy Policy | Terms of Service
